using RRCG;
using UnityEngine;
using RRCGBuild;
using System.Collections.Generic;

namespace RRCGBuild
{
    public class DataTables : CircuitBuilder
    {
        public override void CircuitGraph()
        {
            __BeginReturnScope("CircuitGraph", null, null);
            __BeginAccessibilityScope(AccessibilityScope.Kind.MethodRoot);
                RRCGBuild.DataTable<IntPort, FloatPort, StringPort> table = default !;
                table = __VariableDeclaratorExpression<RRCGBuild.DataTable<IntPort, FloatPort, StringPort>>("table", () => new DataTable<IntPort, FloatPort, StringPort>("Test Table 1", DataTablesTestData.GetThreeColumnData(50)), () => table!, (_RRCG_SETTER_VALUE) => table = _RRCG_SETTER_VALUE);
                RRCGBuild.DataTableColumn<IntPort> indexColumn = default !;
                indexColumn = __VariableDeclaratorExpression<RRCGBuild.DataTableColumn<IntPort>>("indexColumn", () => table.Column0, () => indexColumn!, (_RRCG_SETTER_VALUE) => indexColumn = _RRCG_SETTER_VALUE);
                RRCGBuild.DataTableColumn<FloatPort> percentageColumn = default !;
                percentageColumn = __VariableDeclaratorExpression<RRCGBuild.DataTableColumn<FloatPort>>("percentageColumn", () => table.Column1, () => percentageColumn!, (_RRCG_SETTER_VALUE) => percentageColumn = _RRCG_SETTER_VALUE);
                RRCGBuild.DataTableColumn<StringPort> nameColumn = default !;
                nameColumn = __VariableDeclaratorExpression<RRCGBuild.DataTableColumn<StringPort>>("nameColumn", () => table.Column2, () => nameColumn!, (_RRCG_SETTER_VALUE) => nameColumn = _RRCG_SETTER_VALUE);
            // Access column names
            // This is provided as a convenience feature, mainly for existing data tables.
            // Data Tables created like above will give you autogenerated names like column0, etc.
            LogString(__StringInterpolation("Have columns: ", indexColumn.Name, ", ", percentageColumn.Name, ", ", nameColumn.Name));
            {
                __BeginAccessibilityScope(AccessibilityScope.Kind.General);
                __OptimizedFor(__ConditionalContext("i"), true, 0, table.RowCount, (i) =>
                {
                    __BeginAccessibilityScope(AccessibilityScope.Kind.General);
                    LogString(__StringInterpolation("Row ", i, ": ", indexColumn[i], ", ", percentageColumn[i], ", ", nameColumn[i]));
                    ChipLib.AwaitDelay();
                    __EndAccessibilityScope();
                }

                , () =>
                {
                }

                );
                __EndAccessibilityScope();
            }

            // Test lookup features
            LogString(__StringInterpolation(nameColumn.GetAllRowsContaining("Element 5")));
            LogString(__StringInterpolation(indexColumn.GetFirstRowContaining(25)));
            // Test ReadCell method
            // (Equivalent to the indexer, provided as alternate syntax)
            LogString(__StringInterpolation(percentageColumn.ReadCell(10)));
            __EndAccessibilityScope();
            __EndReturnScope();
        }
    }
}